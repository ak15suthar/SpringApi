package com.controller;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.bean.DoctorProfileBean;
import com.bean.LoginBean;
import com.bean.PatientProfileBean;
import com.bean.ResponseBean;
import com.bean.UserBean;
import com.dao.OtpDao;
import com.dao.SessionDao;
import com.services.MailerService;
import com.services.OtpService;

@CrossOrigin
@RestController
public class SessionController {

	@Autowired
	SessionDao sessionDao;

	@Autowired
	OtpService OtpService;

	@Autowired
	MailerService mailerService;

	@Autowired
	OtpDao otpDao;

	@PostMapping("/login")
	public ResponseBean<UserBean> login(@RequestBody LoginBean loginBean) {

		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		UserBean signupBean = sessionDao.login(loginBean.getEmail(), loginBean.getPassword());

		if (signupBean == null) {
			responseBean.setMsg("Invalid Credentials");
			responseBean.setStatus(201);
		} else {
			responseBean.setData(signupBean);
			responseBean.setMsg("Login Successfully!!");
			responseBean.setStatus(200);
		}
		return responseBean;
	}

	@PostMapping("/signup")
	public ResponseBean<UserBean> signup(@RequestBody PatientProfileBean patientProfileBean) {

		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		if (sessionDao.getUserByEmail(patientProfileBean.getEmail()) != null) {
			responseBean.setMsg("Email Already Exist!!");
			responseBean.setStatus(201);
		} else {

			patientProfileBean.setOtp(OtpService.generateOtp());
			mailerService.sendOtpForUserVerification(patientProfileBean);
			// sessionDao.insertUser(patientProfileBean);

			patientProfileBean.setUserId(patientProfileBean.getUserId());
			patientProfileBean.setPatientName(patientProfileBean.getFirstName());
//			System.out.println("UserId : "+patientProfileBean.getUserId());

			sessionDao.addPatientProfile(patientProfileBean);
			responseBean.setData(patientProfileBean);
			responseBean.setMsg("User Successfully Signup!!");
			responseBean.setStatus(200);

		}

		return responseBean;
	}

	@PostMapping("/doctorSignup")
	public ResponseBean<UserBean> doctorSignup(@RequestBody DoctorProfileBean doctorProfileBean) {

		// convert base64 to file

		//String base64String = "data:image/jpeg;base64,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";
//		byte[] btDataFile = null;
//		try {
//			btDataFile = new sun.misc.BASE64Decoder().decodeBuffer(base64String);
//		} catch (IOException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
//		File of = new File("yourFile.png");
//		FileOutputStream osf;
//		try {
//			osf = new FileOutputStream(of);
//			osf.write(btDataFile);
//			osf.flush();
//		} catch (FileNotFoundException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		} catch (IOException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
		
		//
		// File file = new File("C:\\Users\\royal\\OneDrive\\Pictures\\1.jpg");

//		Cloudinary cloudinary = new Cloudinary(ObjectUtils.asMap("cloud_name", "dioefeznp", "api_key",
//				"714131446928359", "api_secret", "g4zLAJ7rtNj5LQq5QfmlGvXpfao"));
//
//		Map uploadResult;
//		try {
//			uploadResult = cloudinary.uploader().upload(of, ObjectUtils.emptyMap());
//			System.out.println(uploadResult);
//			System.out.println(uploadResult.get("url"));
//		} catch (IOException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
		

		
		System.out.println("Role " + doctorProfileBean.getRoleId());

		System.out.println("Name" + doctorProfileBean.getFirstName());

		doctorProfileBean.setStatus(UserBean.KYC_DOCTOR);
		doctorProfileBean.setStatusReason("Your KYC is pending Our Team Will Contact You Soon..");
//		mailerService.sendDoctorRegisterMail(doctorProfileBean,userBean);

		System.out.println(doctorProfileBean.getEmail());
		System.out.println(doctorProfileBean.getFirstName());
		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		if (sessionDao.getUserByEmail(doctorProfileBean.getEmail()) != null) {
			responseBean.setMsg("Email Already Exist!!");
			responseBean.setStatus(201);
		} else {
			sessionDao.addDoctorProfile(doctorProfileBean);
			responseBean.setData(doctorProfileBean);
			responseBean.setMsg("user successfully signup!!");
			responseBean.setStatus(200);
		}
		return responseBean;
	}

	@PostMapping("/adminAddPatientProfile")
	public ResponseBean<PatientProfileBean> adminAddPatientProfile(@RequestBody PatientProfileBean patientProfileBean) {

		sessionDao.adminAddPatientProfile(patientProfileBean);

		ResponseBean<PatientProfileBean> responseBean = new ResponseBean<>();

		responseBean.setData(patientProfileBean);
		responseBean.setMsg("Patient Profile Added!!");
		responseBean.setStatus(200);

		return responseBean;
	}

	@PostMapping("/adminAddUsers")
	public ResponseBean<UserBean> adminAddUsers(@RequestBody UserBean userBean) {

		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		if (sessionDao.getUserByEmail(userBean.getEmail()) != null) {
			responseBean.setMsg("Email Already Exist!!");
			responseBean.setStatus(201);
		} else {
			sessionDao.adminAddUsers(userBean);
			responseBean.setData(userBean);
			responseBean.setMsg("Admin Add Users!!");
			responseBean.setStatus(200);

		}
		return responseBean;

	}

	@GetMapping("/listSignup")
	public ResponseBean<List<UserBean>> listSignup() {

		List<UserBean> signupBean = sessionDao.listSignup();

		ResponseBean<List<UserBean>> responseBean = new ResponseBean<>();

		responseBean.setData(signupBean);
		responseBean.setMsg("Signup List!!");
		responseBean.setStatus(200);

		return responseBean;
	}

	@GetMapping("/getUserById/{userId}")
	public ResponseBean<UserBean> getUser(@PathVariable("userId") int userId, UserBean userBean) {
		userBean = sessionDao.getUserById(userId);

		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		responseBean.setData(userBean);
		responseBean.setMsg("Single User Return");
		responseBean.setStatus(200);

		return responseBean;
	}

	@PutMapping("/updateSignup")
	public ResponseBean<UserBean> updateSignup(@RequestBody UserBean signupBean) {

		sessionDao.updateSignup(signupBean);

		ResponseBean<UserBean> responseBean = new ResponseBean<>();
		responseBean.setData(signupBean);
		responseBean.setMsg("Signup Updated!!");
		responseBean.setStatus(201);

		return responseBean;
	}

	@DeleteMapping("/deleteSignup/{userId}")
	public ResponseBean<UserBean> deleteSignup(@PathVariable("userId") int userId) {

		sessionDao.deleteSignup(userId);

		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		responseBean.setMsg("Signup Deleted!!");
		responseBean.setStatus(201);

		return responseBean;

	}

	@GetMapping("/resetPassword/{email}")
	public ResponseBean<UserBean> sendOtpForRestPassword(@RequestBody @PathVariable("email") String email) {

		System.out.println("reset call...");
		UserBean userBean = sessionDao.getUserByEmail(email);
		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		if (userBean == null) {
			responseBean.setMsg("Invalid Email Address!!");
			responseBean.setStatus(201);
		} else {
			String otp = OtpService.generateOtp();
			userBean.setOtp(otp);
			otpDao.updateOtp(email, otp);
			mailerService.sendOtpForForgetPassword(userBean);

			responseBean.setMsg("Please Check Email For OTP!!");
			responseBean.setStatus(200);
		}

		return responseBean;
	}

	@GetMapping("/setNewPassword/{otp}/{password}/{email}")
	public ResponseBean<UserBean> setNewPasswordUsingOtp(@PathVariable("otp") String otp,
			@PathVariable("password") String password, @PathVariable("email") String email) {

		System.out.println("setnewpassword...");
		System.out.println(otp);
		System.out.println(password);
		System.out.println(email);

		UserBean dbUser = sessionDao.getUserByEmail(email);
		ResponseBean<UserBean> responseBean = new ResponseBean<>();

		if (dbUser == null) {
			responseBean.setMsg("User Not Found!!");
			responseBean.setStatus(201);
		} else {
			dbUser.setPassword(password);
			if (dbUser.getOtp().equals(otp)) {
				otpDao.updateOtp(email, "");
				sessionDao.updatePassword(dbUser);
				mailerService.sendMailForPasswordUpdate(dbUser);
				responseBean.setMsg("Password Updated!!");
				responseBean.setStatus(200);
			} else {
				responseBean.setMsg("Invalid OTP!!");
				responseBean.setStatus(201);
			}
		}

		return responseBean;
	}
}
